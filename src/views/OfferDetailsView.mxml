<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:mx="library://ns.adobe.com/flex/mx"
		skinClass="skins.BJSkin"
		title="OfferDetailsView"
		viewActivate="offDetails_viewActivateHandler(event)">
	
	<fx:Metadata>
		[ResourceBundle("resources")]
	</fx:Metadata> 

	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			
			import spark.events.ViewNavigatorEvent;
			import spark.primitives.BitmapImage;
			
			import utilities.Funcs;

			[Embed(source='assets/images/action-back.png')]
			private var iconBack:Class;
			
			[Embed(source='assets/images/action-share.png')]
			private var iconShare:Class;
			
			private var superView:View;
			private var jobsYn:Boolean;
			
			override public function createReturnObject():Object {
				var returnedObject:Object = new Object();
				returnedObject.resetBar = true;
				returnedObject.superView = this.superView;
				returnedObject.jobsYn = this.jobsYn;
				return returnedObject;
			}

			protected function offDetails_viewActivateHandler(event:ViewNavigatorEvent):void {
				this.title = resourceManager.getString('resources','menu_OfferDetails');

				var f:Funcs = new Funcs();

				this.lblFreelanceLabel.text = resourceManager.getString('resources','odetails_Freelance');
				this.lblPositivismLabel.text = resourceManager.getString('resources','odetails_Human_Positiv');
				this.lblNegativismLabel.text = resourceManager.getString('resources','odetails_Human_Negativ');
				if (data != null) {
					this.actionBarVisible = data.showActionBar;
					var off:Object = data.itemObject;

					if (this.actionBarVisible)
						this.title = off.title;
					else if (data.superView != null) {
						this.superView = data.superView as View;
						this.superView.title = off.title;
						this.jobsYn = data.jobsYn;

						var btnBack:Button = new spark.components.Button();
						btnBack.setStyle("icon", this.iconBack); 
						btnBack.addEventListener(MouseEvent.CLICK, btnBack_clickHandler);
						this.superView.navigationContent = new Array();
						this.superView.navigationContent.push(btnBack);
						
						var btnShare:Button = new spark.components.Button();
						btnShare.setStyle("icon", this.iconShare); 
						btnShare.addEventListener(MouseEvent.CLICK, btnShare_clickHandler);
						this.superView.actionContent = new Array();
						this.superView.actionContent.push(btnShare);
					}

					if (off.humanyn) {
						this.lblPositivismLabel.text = resourceManager.getString('resources','odetails_Company_Positiv');
						this.lblNegativismLabel.text = resourceManager.getString('resources','odetails_Company_Negativ');
					}
					this.lblCategory.text = off.categorytitle;
					this.lblTitle.text = off.title;
					this.lblDate.text = f.getFullDate(off.publishdate as Date, new Date(), true);
					this.lblFreelance.text = (off.freelanceyn ? resourceManager.getString('resources','yes') : resourceManager.getString('resources','no'));
					this.lblPositivism.text = off.positivism;
					this.lblNegativism.text = off.negativism;
				}
			}
			
			protected function btnBack_clickHandler(event:MouseEvent):void {
				navigator.popView();
			}
			
			protected function btnShare_clickHandler(event:MouseEvent):void {
			}
			
		]]>
	</fx:Script>

	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Style>
		.boldTitle { fontWeight: bold; }
	</fx:Style>

	<s:navigationContent>
		<s:Button icon="@Embed('assets/images/action-back.png')" click="btnBack_clickHandler(event)" />
	</s:navigationContent>
	<s:actionContent>
		<s:Button id="btnShare" icon="@Embed('assets/images/action-share.png')" click="btnShare_clickHandler(event)" />
	</s:actionContent>

	<s:Scroller height="100%" width="100%">
		<s:VGroup gap="10" paddingBottom="4" paddingTop="4" paddingLeft="4" paddingRight="4" width="100%" height="100%">
			<s:Label id="lblCategory" text="Category..." width="100%" />
			<s:Spacer height="6" />
			<s:Label id="lblTitle" text="Title..." width="100%" styleName="boldTitle" />
			<s:Spacer height="6" />
			<s:Label id="lblDate" text="Date..." width="100%" />
			<s:Spacer height="10" />
			<s:HGroup>
				<s:Label id="lblFreelanceLabel" text="Freelance Label..." styleName="boldTitle" />
				<s:Label id="lblFreelance" text="Freelance..." width="100%" />			
			</s:HGroup>
			<s:Spacer height="10" />
			<s:Label id="lblPositivismLabel" text="PosLabel..." width="100%" styleName="boldTitle" />
			<s:Label id="lblPositivism" text="Pos..." width="100%" />
			<s:Spacer height="10" />
			<s:Label id="lblNegativismLabel" text="NegLabel..." width="100%" styleName="boldTitle" />
			<s:Label id="lblNegativism" text="Neg..." width="100%" />
		</s:VGroup>
	</s:Scroller>
</s:View>
